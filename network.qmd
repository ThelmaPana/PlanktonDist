---
title: "Ecological Network"
author: "Thelma Pana√Øotis"
format: 
  html:
    toc: true
editor: visual
lightbox: true
---

```{r}
#| label: load_utils
#| echo: false
#| output: false
#| warning: false
source("utils.R")
```

Read data and list taxa.

```{r}
#| label: read_data
#| cache: true

plankton <- read_parquet("data/00.plankton_clean.parquet")

# Print list of taxa
taxa <- sort(unique(plankton$taxon))
taxa
```

```{mermaid}
%%{init: {'theme':'neutral'}}%%
graph LR
%% Nodes
  Acantharea:::mixotroph
  Actinopterygii
  Annelida:::carnivorous
  Appendicularia:::herbivorous
  Aulacanthidae:::detritivore
  Chaetognatha:::carnivorous
  Collodaria_colonial:::mixotroph
  Collodaria_solitaryblack:::mixotroph
  Cop_Calanoida
  Cop_Calanus:::herbivorous
  Cop_Euchaeta:::carnivorous
  Cop_Euchaeta_juv
  Cop_Harpacticoida
  Cop_Heterorhabdus
  Cop_ogiverous
  Cop_Oithona:::herbivorous
  Cop_other
  Cop_Pleuromamma
  Cop_small:::herbivorous
  Crustacea_other
  Ctenophora:::carnivorous
  Doliolida:::herbivorous
  Eumalacostraca
  Hydrozoa
  Mollusca
  Pyrocystis
  Rhizaria
  Scyphozoa_ephyra:::carnivorous
  Siphonophorae:::carnivorous
  phyto((Phyto)):::phyto

%% Links
  phyto --> Acantharea
  phyto --> Appendicularia
  phyto --> Collodaria_colonial
  phyto --> Collodaria_solitaryblack
  phyto --> Cop_Calanoida
  phyto --> Cop_Calanus
  phyto --> Cop_Harpacticoida
  phyto --> Cop_small
  phyto --> Cop_Oithona
  phyto --> Copepoda
  phyto --> Doliolida
  phyto --> Copepoda

  Cop_small --> Acantharea
  Cop_small --> Cop_Euchaeta

  Acantharea --> Acantharea

  Copepoda --> Scyphozoa_ephyra
  Copepoda --> Chaetognatha
  Copepoda --> Ctenophora
  Copepoda --> Siphonophorae

  Cop_small --> Siphonophorae

  Rhizaria --> Rhizaria

%% Classes
 classDef carnivorous fill:#ed8a79
 classDef detritivore fill:#bd9a66
 classDef herbivorous fill:#ace892
 classDef omnivorous fill:#917cd9
 classDef mixotroph fill:#79aded
 classDef phyto fill:#90d1a4
 
 
```
